##############
Input
##############

This section is related to the JUNE-NZ component: **cli_input**.

**********
Background
**********
JUNE-NZ relies on input data primarily generated by the population layer of the original JUNE model. 
The synthetic population in JUNE often leads to a high volume of potential interactions by individual agents. 
To mitigate the graph expansion in the Graph Neural Network and provide a more accurate representation of model uncertainties, 
we suggest randomly partitioning the interactions from the original synthetic population. 
This approach allows us to create multiple input datasets for JUNE-NZ, which can be run in parallel for simulations.

In order to create the input for JUNE-NZ, we need the following dataset as the input for **cli_input**:

- ``target`` data: The target dataset represents the ground truth, such as the recorded number of COVID-19 cases, that the model aims to learn and predict.

**********
target data
**********
The target dataset represents the ground truth, such as the recorded number of COVID-19 cases, that the model aims to learn and predict. For now, the target dataset must be 
in the format of __parquet__. An example of the target dataset is shown below:

+-------------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
| Region            | Week_11| Week_13| Week_15| Week_16| Week_17| Week_18| Week_19| Week_20| Week_21| Week_22|
+===================+========+========+========+========+========+========+========+========+========+========+
| Waitemata         | 1.0    | 2      | 3.0    | 0.0    | 4.0    | 6.0    | 6      | 6      | 5      | 4      |
+-------------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
| Auckland          | 2.0    | 2      | 1.0    | 0.0    | 1.0    | 1.0    | 2      | 1      | 4      | 2      |
+-------------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
| Counties Manukau  | 0.0    | 0      | 0.0    | 0.0    | 0.0    | 1.0    | 2      | 2      | 1      | 3      |
+-------------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+

**cli_input** will combine the above dataset, and produce something like the below (which is the one used in training for JUNE-NZ):


+--------+------+
|        | target |
+========+======+
| Week_2 | 0.0  |
+--------+------+
| Week_3 | 0.0  |
+--------+------+
| Week_4 | 3.0  |
+--------+------+
| Week_5 | 5.0  |
+--------+------+
| Week_6 | 11.0 |
+--------+------+
| Week_7 | 22.0 |
+--------+------+

The processed output of the target data will be stored in the format of __csv__ in the working directory.



**********
Configuration
**********
The configuration for **cli_input** contains two parts:

- ``interaction_ratio``: This parameter specifies the desired percentage of original interactions to be included in the dataset.
- ``vaccine_ratio``: This parameter accounts for the vaccination rates among different ethnic groups.

An example of the configuration can be found below:

```
    interaction_ratio:
        household: 0.1
        cinema: 0.1
        pub: 0.1
        gym: 0.1
        grocery: 0.1
        company: 0.05
        school: 0.05
        hospital: 0.03
        inter_city_transport: 0.3
        city_transport: 0.3

    vaccine_ratio:
        European: 0.75
        Maori: 0.47
        Pacific: 0.6
        Asian: 0.89
        MELAA: 0.75
```

The dataset will be randomly generated according to the percentages specified in the configuration. 
This allows us to produce multiple datasets with distinct synthetic population representations, 
which can then be employed in the model to generate ensemble-based model outputs.